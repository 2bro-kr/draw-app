function runDraw() {
	calculateProbabilities();
	if (!drawResult) return;
	const { active, weights } = drawResult;
	let selected = [];
	let remaining = active.map((p, i) => ({ ...p, weight: weights[i] }));

	const resultDiv = document.getElementById("result");
	resultDiv.innerHTML = "<div class='winner'>ðŸ”„ ì¶”ì²¨ ì¤‘...</div>";

	setTimeout(() => {
		for (let c = 0; c < winnerCount && remaining.length > 0; c++) {
			let total = remaining.reduce((sum, p) => sum + p.weight, 0);
			let r = Math.random() * total;
			let acc = 0, index = -1;
			for (let i = 0; i < remaining.length; i++) {
				acc += remaining[i].weight;
				if (r < acc) {
					selected.push(remaining[i]);
					index = i;
					break;
				}
			}
			remaining.splice(index, 1);
		}

		resultDiv.innerHTML = "";
		selected.forEach((p, idx) => {
			setTimeout(() => {
				const popup = document.createElement("div");
				popup.className = "winner";
				popup.style.position = "fixed";
				popup.style.top = "40%";
				popup.style.left = "50%";
				popup.style.transform = "translate(-50%, -50%)";
				popup.style.background = "#fff";
				popup.style.border = "2px solid #e74c3c";
				popup.style.padding = "20px";
				popup.style.zIndex = "9999";
				popup.style.boxShadow = "0 4px 10px rgba(0, 0, 0, 0.2)";
				popup.innerHTML = `<strong>ðŸŽ‰ ${p.name} ë‹¹ì²¨!</strong>`;
				document.body.appendChild(popup);
				setTimeout(() => popup.remove(), 2000);
			}, idx * 1000);
		});

		selected.forEach(w => history.unshift({ name: w.name, time: new Date().toLocaleString() }));
		saveParticipants();
		displayLog();
		playSound();
	}, 1000);
}
	selected.forEach(w => history.unshift({ name: w.name, time: new Date().toLocaleString() }));
	saveParticipants();
	displayLog();
}
